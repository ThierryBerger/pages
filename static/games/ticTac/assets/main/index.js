System.register("chunks:///_virtual/GameBoard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameLogic.ts","./MainMenu.ts","./ResultScreen.ts"],(function(t){var e,i,n,r,a,s,l,o,u,h,c,_,m,p,f,d,g,y,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.createForOfIteratorHelperLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,o=t.Color,u=t.Node,h=t.Label,c=t.Sprite,_=t.Button,m=t.Component},function(t){p=t.AIDifficulty,f=t.CellState,d=t.GameResult,g=t.GameLogic},function(t){y=t.MainMenu},function(t){v=t.ResultScreen}],execute:function(){var T,C,b,M,I,L,w,k,S,O,R,X,A,G,D,P,E,W;s._RF.push({},"0e13067qKJEPo0wcJUyffsZ","GameBoard",void 0);var z=l.ccclass,F=l.property,Y=new o(90,90,90,255),H=new o(88,101,242,255),x=new o(235,87,87,255),B=new o(72,209,140,255),N=new o(100,104,130,255),U=new o(255,255,255,255),V=new o(255,255,255,0);t("GameBoard",(T=z("GameBoard"),C=F({type:[u],tooltip:"9 cell Nodes in row-major order (0 = top-left)"}),b=F({type:h,tooltip:"Shows current turn / result"}),M=F({type:h,tooltip:"(Optional) Countdown timer per turn"}),I=F({type:y,tooltip:"MainMenu component on MainMenuPanel"}),L=F({type:v,tooltip:"ResultScreen component on ResultPanel"}),w=F({tooltip:"Seconds per player turn. 0 = no timer."}),k=F({tooltip:"Seconds AI waits before playing (0.3–1.0 feels natural)"}),T(((W=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,r(e,"cells",R,a(e)),r(e,"statusLabel",X,a(e)),r(e,"timerLabel",A,a(e)),r(e,"mainMenu",G,a(e)),r(e,"resultScreen",D,a(e)),r(e,"turnTime",P,a(e)),r(e,"aiDelay",E,a(e)),e._matchIndex=-1,e._aiGamesPlayed=0,e._aiWins=0,e._logic=new g,e._active=!1,e._playerTurn=!0,e._timerRemaining=0,e._timerRunning=!1,e._playerMark=f.X,e._aiMark=f.O,e._vsAI=!0,e}i(e,t);var s=e.prototype;return s.onLoad=function(){for(var t=this,e=function(e){var i=t.cells[e].getComponent(_);i&&(i.transition=_.Transition.SCALE,i.zoomScale=.92);var n=t.cells[e].getComponentInChildren(h);n&&(n.isBold=!0,n.fontSize=72,n.lineHeight=72,n.color=V.clone()),t.cells[e].on(_.EventType.CLICK,(function(){return t._onCellClicked(e)}),t)},i=0;i<this.cells.length;i++)e(i);this.node.active=!1},s.update=function(t){!this._timerRunning||this.turnTime<=0||(this._timerRemaining-=t,this.timerLabel&&(this.timerLabel.string=String(Math.max(0,Math.ceil(this._timerRemaining)))),this._timerRemaining<=0&&(this._timerRunning=!1,this._onTurnTimeout()))},s.startGame=function(t){var i=this;if(void 0===t&&(t=this._vsAI),this._vsAI=t,t){var n=this._playerMark;if(this._playerMark=n===f.X?f.O:f.X,this._aiMark=n===f.X?f.X:f.O,this._matchIndex=(this._matchIndex+1)%e.DIFFICULTY_CYCLE.length,this._aiGamesPlayed>=3){var r=this._aiWins/this._aiGamesPlayed;r>.7&&Math.random()<.9?this._logic.difficulty=p.Hard:r<.3&&Math.random()<.9?this._logic.difficulty=p.Easy:this._logic.difficulty=e.DIFFICULTY_CYCLE[this._matchIndex]}else this._logic.difficulty=e.DIFFICULTY_CYCLE[this._matchIndex]}else this._playerMark=f.X,this._aiMark=f.O;this._logic.reset(),this._active=!0;for(var a=0;a<this.cells.length;a++)this._setCellVisual(a,f.Empty),this._setCellInteractable(a,!0);this.node.active=!0,t&&this._playerMark===f.O?(this._playerTurn=!1,this._updateStatus(),this.scheduleOnce((function(){return i._aiTurn()}),this.aiDelay)):(this._playerTurn=!0,this._updateStatus(),this._startTurnTimer())},s._onCellClicked=function(t){var e=this;if(this._active&&(!this._vsAI||this._playerTurn)&&this._logic.makeMove(t)){this._setCellVisual(t,this._logic.currentPlayer),this._setCellInteractable(t,!1),this._stopTurnTimer();var i=this._logic.checkResult();i===d.None?(this._logic.switchTurn(),this._vsAI?(this._playerTurn=!1,this._updateStatus(),this.scheduleOnce((function(){return e._aiTurn()}),this.aiDelay)):(this._playerTurn=!this._playerTurn,this._updateStatus(),this._startTurnTimer())):this._endGame(i)}},s._aiTurn=function(){if(this._active){var t=this._logic.getAIMove();if(!(t<0)){this._logic.makeMove(t),this._setCellVisual(t,this._aiMark),this._setCellInteractable(t,!1);var e=this._logic.checkResult();e===d.None?(this._logic.switchTurn(),this._playerTurn=!0,this._updateStatus(),this._startTurnTimer()):this._endGame(e)}}},s._endGame=function(t){var e=this;this._active=!1,this._stopTurnTimer();for(var i=0;i<this.cells.length;i++)this._setCellInteractable(i,!1);var r,a=this._logic.getWinLine();if(a)for(var s,l=n(a);!(s=l()).done;){var o=s.value;this._setCellColor(o,B)}else for(var u=0;u<this.cells.length;u++)this._setCellColor(u,N);if(t===d.Draw)r="Draw!";else if(this._vsAI){var h=t===d.XWins&&this._playerMark===f.X||t===d.OWins&&this._playerMark===f.O;r=h?"You Win!":"You Lose!"}else r=t===d.XWins?"Player X Wins!":"Player O Wins!";(this.statusLabel.string=r,this._vsAI)&&(this._aiGamesPlayed++,(t===d.XWins&&this._playerMark===f.X||t===d.OWins&&this._playerMark===f.O)&&this._aiWins++);this.scheduleOnce((function(){return e.resultScreen.show(r)}),1)},s.backToMenu=function(){this._active=!1,this._stopTurnTimer(),this.unscheduleAllCallbacks(),this.node.active=!1,this.mainMenu.show()},s._startTurnTimer=function(){this.turnTime<=0||(this._timerRemaining=this.turnTime,this._timerRunning=!0,this.timerLabel&&(this.timerLabel.node.active=!0,this.timerLabel.string=String(this.turnTime)))},s._stopTurnTimer=function(){this._timerRunning=!1,this.timerLabel&&(this.timerLabel.node.active=!1)},s._onTurnTimeout=function(){var t=this;if(this._active&&(!this._vsAI||this._playerTurn)){var e=this._logic.getEmptyCells();if(0!==e.length){var i=e[Math.floor(Math.random()*e.length)];this._logic.makeMove(i),this._setCellVisual(i,this._logic.currentPlayer),this._setCellInteractable(i,!1);var n=this._logic.checkResult();n===d.None?(this._logic.switchTurn(),this._vsAI?(this._playerTurn=!1,this._updateStatus(),this.scheduleOnce((function(){return t._aiTurn()}),this.aiDelay)):(this._playerTurn=!this._playerTurn,this._updateStatus(),this._startTurnTimer())):this._endGame(n)}}},s._updateStatus=function(){if(this._vsAI){var t=this._playerMark===f.X?"X":"O";this.statusLabel.string=this._playerTurn?"Your Turn ("+t+")":"AI Thinking…"}else{var e=this._logic.currentPlayer===f.X?"X":"O";this.statusLabel.string="Player "+e+"'s Turn"}},s._setCellVisual=function(t,e){var i=this.cells[t];if(i){var n=i.getComponentInChildren(h);if(n)switch(e){case f.X:n.string="X",n.color=U.clone();break;case f.O:n.string="O",n.color=U.clone();break;default:n.string="",n.color=V.clone()}var r=e===f.X?H:e===f.O?x:Y;this._setCellColor(t,r)}},s._setCellColor=function(t,e){var i,n=null==(i=this.cells[t])?void 0:i.getComponent(c);n&&(n.color=e)},s._setCellInteractable=function(t,e){var i,n=null==(i=this.cells[t])?void 0:i.getComponent(_);n&&(n.interactable=e)},e}(m)).DIFFICULTY_CYCLE=[p.Hard,p.Easy,p.Hard,p.Medium,p.Medium,p.Hard,p.Easy,p.Hard,p.Medium,p.Medium,p.Medium,p.Hard],R=e((O=W).prototype,"cells",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=e(O.prototype,"statusLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(O.prototype,"timerLabel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(O.prototype,"mainMenu",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(O.prototype,"resultScreen",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(O.prototype,"turnTime",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),E=e(O.prototype,"aiDelay",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),S=O))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,i,e;return{setters:[function(t){r=t.createForOfIteratorHelperLoose,i=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"9005fP6uDdCh6gItAkA0+03","GameLogic",void 0);var n=t("CellState",function(t){return t[t.Empty=0]="Empty",t[t.X=1]="X",t[t.O=2]="O",t}({})),o=t("GameResult",function(t){return t[t.None=0]="None",t[t.XWins=1]="XWins",t[t.OWins=2]="OWins",t[t.Draw=3]="Draw",t}({})),a=t("AIDifficulty",function(t){return t[t.Easy=0]="Easy",t[t.Medium=1]="Medium",t[t.Hard=2]="Hard",t}({})),s=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];t("GameLogic",function(){function t(){this._board=[],this._currentPlayer=n.X,this._moveCount=0,this._difficulty=a.Hard,this.reset()}var e=t.prototype;return e.reset=function(){this._board=new Array(9).fill(n.Empty),this._currentPlayer=n.X,this._moveCount=0},e.makeMove=function(t){return!(t<0||t>8)&&(this._board[t]===n.Empty&&(this._board[t]=this._currentPlayer,this._moveCount++,!0))},e.switchTurn=function(){this._currentPlayer=this._currentPlayer===n.X?n.O:n.X},e.checkResult=function(){for(var t=0,r=s;t<r.length;t++){var i=r[t],e=i[0],a=i[1],u=i[2];if(this._board[e]!==n.Empty&&this._board[e]===this._board[a]&&this._board[e]===this._board[u])return this._board[e]===n.X?o.XWins:o.OWins}return this._moveCount>=9?o.Draw:o.None},e.getWinLine=function(){for(var t=0,r=s;t<r.length;t++){var i=r[t],e=i[0],o=i[1],a=i[2];if(this._board[e]!==n.Empty&&this._board[e]===this._board[o]&&this._board[e]===this._board[a])return i}return null},e.getEmptyCells=function(){for(var t=[],r=0;r<9;r++)this._board[r]===n.Empty&&t.push(r);return t},e.getAIMove=function(){var t=this.getEmptyCells();if(0===t.length)return-1;switch(this._difficulty){case a.Easy:return this._randomMove(t);case a.Medium:return Math.random()<.5?this._randomMove(t):this._bestMove(t);case a.Hard:default:return this._bestMove(t)}},e._randomMove=function(t){return t[Math.floor(Math.random()*t.length)]},e._bestMove=function(t){for(var i,e=this._currentPlayer,o=-1/0,a=t[0],s=r(t);!(i=s()).done;){var u=i.value;this._board[u]=e;var h=this._minimax(this._moveCount+1,!1,-1/0,1/0,e);this._board[u]=n.Empty,h>o&&(o=h,a=u)}return a},e._minimax=function(t,r,i,e,o){var a=o===n.X?n.O:n.X,s=this._checkWinner();if(s===o)return 10-t;if(s===a)return t-10;if(t>=9)return 0;if(r){for(var u=-1/0,h=0;h<9&&!(this._board[h]===n.Empty&&(this._board[h]=o,u=Math.max(u,this._minimax(t+1,!1,i,e,o)),this._board[h]=n.Empty,e<=(i=Math.max(i,u))));h++);return u}for(var _=1/0,c=0;c<9&&!(this._board[c]===n.Empty&&(this._board[c]=a,_=Math.min(_,this._minimax(t+1,!0,i,e,o)),this._board[c]=n.Empty,(e=Math.min(e,_))<=i));c++);return _},e._checkWinner=function(){for(var t=0,r=s;t<r.length;t++){var i=r[t],e=i[0],o=i[1],a=i[2];if(this._board[e]!==n.Empty&&this._board[e]===this._board[o]&&this._board[e]===this._board[a])return this._board[e]}return n.Empty},i(t,[{key:"board",get:function(){return this._board}},{key:"currentPlayer",get:function(){return this._currentPlayer}},{key:"moveCount",get:function(){return this._moveCount}},{key:"difficulty",get:function(){return this._difficulty},set:function(t){this._difficulty=t}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameBoard.ts","./GameLogic.ts","./MainMenu.ts","./ResultScreen.ts"],(function(){return{setters:[null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,a,o,i,r,l,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,l=e.Button,u=e.Node,c=e.Component}],execute:function(){var d,p,s,h,y,m,f,g,B;i._RF.push({},"cfc36HIc5dHvoveCfdLVZ+j","MainMenu",void 0);var v=r.ccclass,_=r.property;e("MainMenu",(d=v("MainMenu"),p=_({type:l,tooltip:"Start a game against the AI"}),s=_({type:l,tooltip:"Start a local 2-player game"}),h=_({type:u,tooltip:"Drag the GamePanel node here"}),d((f=t((m=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,a(t,"playRandomBtn",f,o(t)),a(t,"playFriendBtn",g,o(t)),a(t,"gameBoardNode",B,o(t)),t._gameBoard=void 0,t}n(t,e);var i=t.prototype;return i.onLoad=function(){this._gameBoard=this.gameBoardNode.getComponent("GameBoard"),this.playRandomBtn.node.on(l.EventType.CLICK,this._onPlayRandom,this),this.playFriendBtn.node.on(l.EventType.CLICK,this._onPlayFriend,this)},i.show=function(){this.node.active=!0},i.hide=function(){this.node.active=!1},i._onPlayRandom=function(){this._gameBoard.startGame(!0),this.hide()},i._onPlayFriend=function(){this._gameBoard.startGame(!1),this.hide()},t}(c)).prototype,"playRandomBtn",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(m.prototype,"playFriendBtn",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(m.prototype,"gameBoardNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/ResultScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,i,r,a,l,u,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Label,u=e.Button,c=e.Node,s=e.Component}],execute:function(){var h,p,d,m,b,f,g,y,B,v,_;r._RF.push({},"2d1bfC3sFhNmKZemlE3+jyg","ResultScreen",void 0);var L=a.ccclass,R=a.property;e("ResultScreen",(h=L("ResultScreen"),p=R({type:l,tooltip:"Label that displays the result message"}),d=R({type:u,tooltip:"Button to start a new game immediately"}),m=R({type:u,tooltip:"Button to return to the main menu"}),b=R({type:c,tooltip:"Drag the GamePanel node here"}),h((y=t((g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"resultLabel",y,i(t)),o(t,"rematchBtn",B,i(t)),o(t,"backToMenuBtn",v,i(t)),o(t,"gameBoardNode",_,i(t)),t._gameBoard=void 0,t}n(t,e);var r=t.prototype;return r.onLoad=function(){this._gameBoard=this.gameBoardNode.getComponent("GameBoard"),this.rematchBtn.node.on(u.EventType.CLICK,this._onRematch,this),this.backToMenuBtn.node.on(u.EventType.CLICK,this._onBack,this)},r.show=function(e){this.resultLabel.string=e,this.node.active=!0},r.hide=function(){this.node.active=!1},r._onRematch=function(){this.hide(),this._gameBoard.startGame()},r._onBack=function(){this.hide(),this._gameBoard.backToMenu()},t}(s)).prototype,"resultLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(g.prototype,"rematchBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(g.prototype,"backToMenuBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(g.prototype,"gameBoardNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});