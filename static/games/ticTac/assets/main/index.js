System.register("chunks:///_virtual/GameBoard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameLogic.ts","./MainMenu.ts","./ResultScreen.ts"],(function(e){var t,i,n,r,l,a,s,o,u,c,h,_,m,p,f,g,b,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.createForOfIteratorHelperLoose,r=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,o=e.Color,u=e.Node,c=e.Label,h=e.Sprite,_=e.Button,m=e.Component},function(e){p=e.CellState,f=e.GameResult,g=e.GameLogic},function(e){b=e.MainMenu},function(e){v=e.ResultScreen}],execute:function(){var d,T,y,C,w,M,L,S,k,R,I,G,z,O,D,B,A;a._RF.push({},"0e13067qKJEPo0wcJUyffsZ","GameBoard",void 0);var E=s.ccclass,N=s.property,P=new o(90,90,90,255),V=new o(88,101,242,255),X=new o(235,87,87,255),W=new o(72,209,140,255),F=new o(100,104,130,255),H=new o(255,255,255,255),Y=new o(255,255,255,0);e("GameBoard",(d=E("GameBoard"),T=N({type:[u],tooltip:"9 cell Nodes in row-major order (0 = top-left)"}),y=N({type:c,tooltip:"Shows current turn / result"}),C=N({type:c,tooltip:"(Optional) Countdown timer per turn"}),w=N({type:b,tooltip:"MainMenu component on MainMenuPanel"}),M=N({type:v,tooltip:"ResultScreen component on ResultPanel"}),L=N({tooltip:"Seconds per player turn. 0 = no timer."}),S=N({tooltip:"Seconds AI waits before playing (0.3–1.0 feels natural)"}),d((I=t((R=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,r(t,"cells",I,l(t)),r(t,"statusLabel",G,l(t)),r(t,"timerLabel",z,l(t)),r(t,"mainMenu",O,l(t)),r(t,"resultScreen",D,l(t)),r(t,"turnTime",B,l(t)),r(t,"aiDelay",A,l(t)),t._logic=new g,t._active=!1,t._playerTurn=!0,t._timerRemaining=0,t._timerRunning=!1,t._playerMark=p.X,t._aiMark=p.O,t}i(t,e);var a=t.prototype;return a.onLoad=function(){for(var e=this,t=function(t){var i=e.cells[t].getComponent(_);i&&(i.transition=_.Transition.SCALE,i.zoomScale=.92);var n=e.cells[t].getComponentInChildren(c);n&&(n.isBold=!0,n.fontSize=72,n.lineHeight=72,n.color=Y.clone()),e.cells[t].on(_.EventType.CLICK,(function(){return e._onCellClicked(t)}),e)},i=0;i<this.cells.length;i++)t(i);this.node.active=!1},a.update=function(e){!this._timerRunning||this.turnTime<=0||(this._timerRemaining-=e,this.timerLabel&&(this.timerLabel.string=String(Math.max(0,Math.ceil(this._timerRemaining)))),this._timerRemaining<=0&&(this._timerRunning=!1,this._onTurnTimeout()))},a.startGame=function(){this._logic.reset(),this._active=!0,this._playerTurn=!0;for(var e=0;e<this.cells.length;e++)this._setCellVisual(e,p.Empty),this._setCellInteractable(e,!0);this.node.active=!0,this._updateStatus(),this._startTurnTimer()},a._onCellClicked=function(e){var t=this;if(this._active&&this._playerTurn&&this._logic.makeMove(e)){this._setCellVisual(e,this._playerMark),this._setCellInteractable(e,!1),this._stopTurnTimer();var i=this._logic.checkResult();i===f.None?(this._logic.switchTurn(),this._playerTurn=!1,this._updateStatus(),this.scheduleOnce((function(){return t._aiTurn()}),this.aiDelay)):this._endGame(i)}},a._aiTurn=function(){if(this._active){var e=this._logic.getAIMove();if(!(e<0)){this._logic.makeMove(e),this._setCellVisual(e,this._aiMark),this._setCellInteractable(e,!1);var t=this._logic.checkResult();t===f.None?(this._logic.switchTurn(),this._playerTurn=!0,this._updateStatus(),this._startTurnTimer()):this._endGame(t)}}},a._endGame=function(e){var t=this;this._active=!1,this._stopTurnTimer();for(var i=0;i<this.cells.length;i++)this._setCellInteractable(i,!1);var r,l=this._logic.getWinLine();if(l)for(var a,s=n(l);!(a=s()).done;){var o=a.value;this._setCellColor(o,W)}else for(var u=0;u<this.cells.length;u++)this._setCellColor(u,F);switch(e){case f.XWins:r="You Win!";break;case f.OWins:r="You Lose!";break;default:r="Draw!"}this.statusLabel.string=r,this.scheduleOnce((function(){return t.resultScreen.show(r)}),1)},a.backToMenu=function(){this._active=!1,this._stopTurnTimer(),this.unscheduleAllCallbacks(),this.node.active=!1,this.mainMenu.show()},a._startTurnTimer=function(){this.turnTime<=0||(this._timerRemaining=this.turnTime,this._timerRunning=!0,this.timerLabel&&(this.timerLabel.node.active=!0,this.timerLabel.string=String(this.turnTime)))},a._stopTurnTimer=function(){this._timerRunning=!1,this.timerLabel&&(this.timerLabel.node.active=!1)},a._onTurnTimeout=function(){var e=this;if(this._active&&this._playerTurn){var t=this._logic.getEmptyCells();if(0!==t.length){var i=t[Math.floor(Math.random()*t.length)];this._logic.makeMove(i),this._setCellVisual(i,this._playerMark),this._setCellInteractable(i,!1);var n=this._logic.checkResult();n===f.None?(this._logic.switchTurn(),this._playerTurn=!1,this._updateStatus(),this.scheduleOnce((function(){return e._aiTurn()}),this.aiDelay)):this._endGame(n)}}},a._updateStatus=function(){this.statusLabel.string=this._playerTurn?"Your Turn":"AI Thinking…"},a._setCellVisual=function(e,t){var i=this.cells[e];if(i){var n=i.getComponentInChildren(c);if(n)switch(t){case p.X:n.string="X",n.color=H.clone();break;case p.O:n.string="O",n.color=H.clone();break;default:n.string="",n.color=Y.clone()}var r=t===p.X?V:t===p.O?X:P;this._setCellColor(e,r)}},a._setCellColor=function(e,t){var i,n=null==(i=this.cells[e])?void 0:i.getComponent(h);n&&(n.color=t)},a._setCellInteractable=function(e,t){var i,n=null==(i=this.cells[e])?void 0:i.getComponent(_);n&&(n.interactable=t)},t}(m)).prototype,"cells",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=t(R.prototype,"statusLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(R.prototype,"timerLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(R.prototype,"mainMenu",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(R.prototype,"resultScreen",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(R.prototype,"turnTime",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),A=t(R.prototype,"aiDelay",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),k=R))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,e;return{setters:[function(t){r=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"9005fP6uDdCh6gItAkA0+03","GameLogic",void 0);var n=t("CellState",function(t){return t[t.Empty=0]="Empty",t[t.X=1]="X",t[t.O=2]="O",t}({})),o=t("GameResult",function(t){return t[t.None=0]="None",t[t.XWins=1]="XWins",t[t.OWins=2]="OWins",t[t.Draw=3]="Draw",t}({})),i=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];t("GameLogic",function(){function t(){this._board=[],this._currentPlayer=n.X,this._moveCount=0,this.reset()}var e=t.prototype;return e.reset=function(){this._board=new Array(9).fill(n.Empty),this._currentPlayer=n.X,this._moveCount=0},e.makeMove=function(t){return!(t<0||t>8)&&(this._board[t]===n.Empty&&(this._board[t]=this._currentPlayer,this._moveCount++,!0))},e.switchTurn=function(){this._currentPlayer=this._currentPlayer===n.X?n.O:n.X},e.checkResult=function(){for(var t=0,r=i;t<r.length;t++){var e=r[t],u=e[0],s=e[1],a=e[2];if(this._board[u]!==n.Empty&&this._board[u]===this._board[s]&&this._board[u]===this._board[a])return this._board[u]===n.X?o.XWins:o.OWins}return this._moveCount>=9?o.Draw:o.None},e.getWinLine=function(){for(var t=0,r=i;t<r.length;t++){var e=r[t],o=e[0],u=e[1],s=e[2];if(this._board[o]!==n.Empty&&this._board[o]===this._board[u]&&this._board[o]===this._board[s])return e}return null},e.getEmptyCells=function(){for(var t=[],r=0;r<9;r++)this._board[r]===n.Empty&&t.push(r);return t},e.getAIMove=function(){var t=this.getEmptyCells();return 0===t.length?-1:t[Math.floor(Math.random()*t.length)]},r(t,[{key:"board",get:function(){return this._board}},{key:"currentPlayer",get:function(){return this._currentPlayer}},{key:"moveCount",get:function(){return this._moveCount}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameBoard.ts","./GameLogic.ts","./MainMenu.ts","./ResultScreen.ts"],(function(){return{setters:[null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,a,o,i,r,l,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,r=e._decorator,l=e.Button,u=e.Node,c=e.Component}],execute:function(){var p,d,s,m,y,h,f,g,B;i._RF.push({},"cfc36HIc5dHvoveCfdLVZ+j","MainMenu",void 0);var v=r.ccclass,b=r.property;e("MainMenu",(p=v("MainMenu"),d=b({type:l,tooltip:"Start a game against the AI"}),s=b({type:l,tooltip:"Future: start a multiplayer game"}),m=b({type:u,tooltip:"Drag the GamePanel node here"}),p((f=t((h=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,a(t,"playRandomBtn",f,o(t)),a(t,"playFriendBtn",g,o(t)),a(t,"gameBoardNode",B,o(t)),t._gameBoard=void 0,t}n(t,e);var i=t.prototype;return i.onLoad=function(){this._gameBoard=this.gameBoardNode.getComponent("GameBoard"),this.playRandomBtn.node.on(l.EventType.CLICK,this._onPlayRandom,this)},i.show=function(){this.node.active=!0},i.hide=function(){this.node.active=!1},i._onPlayRandom=function(){this._gameBoard.startGame(),this.hide()},t}(c)).prototype,"playRandomBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(h.prototype,"playFriendBtn",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(h.prototype,"gameBoardNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=h))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/ResultScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,o,i,r,a,l,u,c,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Label,u=e.Button,c=e.Node,s=e.Component}],execute:function(){var h,p,d,m,b,f,g,y,B,v,_;r._RF.push({},"2d1bfC3sFhNmKZemlE3+jyg","ResultScreen",void 0);var L=a.ccclass,R=a.property;e("ResultScreen",(h=L("ResultScreen"),p=R({type:l,tooltip:"Label that displays the result message"}),d=R({type:u,tooltip:"Button to start a new game immediately"}),m=R({type:u,tooltip:"Button to return to the main menu"}),b=R({type:c,tooltip:"Drag the GamePanel node here"}),h((y=t((g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"resultLabel",y,i(t)),o(t,"rematchBtn",B,i(t)),o(t,"backToMenuBtn",v,i(t)),o(t,"gameBoardNode",_,i(t)),t._gameBoard=void 0,t}n(t,e);var r=t.prototype;return r.onLoad=function(){this._gameBoard=this.gameBoardNode.getComponent("GameBoard"),this.rematchBtn.node.on(u.EventType.CLICK,this._onRematch,this),this.backToMenuBtn.node.on(u.EventType.CLICK,this._onBack,this)},r.show=function(e){this.resultLabel.string=e,this.node.active=!0},r.hide=function(){this.node.active=!1},r._onRematch=function(){this.hide(),this._gameBoard.startGame()},r._onBack=function(){this.hide(),this._gameBoard.backToMenu()},t}(s)).prototype,"resultLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(g.prototype,"rematchBtn",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(g.prototype,"backToMenuBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(g.prototype,"gameBoardNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});