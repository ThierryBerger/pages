System.register("chunks:///_virtual/GameBoard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameLogic.ts","./MainMenu.ts","./ResultScreen.ts"],(function(e){var t,i,a,n,s,l,r,o,c,u,h,_,p,f,d,y,v,m,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,r=e._decorator,o=e.Color,c=e.Node,u=e.Label,h=e.Sprite,_=e.Button,p=e.Component},function(e){f=e.AIDifficulty,d=e.GameLogic,y=e.CellState,v=e.GameResult},function(e){m=e.MainMenu},function(e){g=e.ResultScreen}],execute:function(){var C,M,I,b,k,w,T,L,S,O,X,A,G,D;l._RF.push({},"0e13067qKJEPo0wcJUyffsZ","GameBoard",void 0);var P=r.ccclass,W=r.property,E=new o(90,90,90,255),F=new o(88,101,242,255),Y=new o(235,87,87,255),z=new o(72,209,140,255),H=new o(100,104,130,255),R=new o(255,255,255,255),B=new o(255,255,255,0);e("GameBoard",(C=P("GameBoard"),M=W({type:[c],tooltip:"9 cell Nodes in row-major order (0 = top-left)"}),I=W({type:u,tooltip:"Shows current turn / result"}),b=W({type:m,tooltip:"MainMenu component on MainMenuPanel"}),k=W({type:g,tooltip:"ResultScreen component on ResultPanel"}),w=W({tooltip:"Seconds AI waits before playing (0.3–1.0 feels natural)"}),C(((D=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return t=e.call.apply(e,[this].concat(s))||this,a(t,"cells",S,n(t)),a(t,"statusLabel",O,n(t)),a(t,"mainMenu",X,n(t)),a(t,"resultScreen",A,n(t)),a(t,"aiDelay",G,n(t)),t._matchIndex=-1,t._aiGamesPlayed=0,t._aiWins=0,t._logic=new d,t._active=!1,t._playerTurn=!0,t._playerMark=y.X,t._aiMark=y.O,t._vsAI=!0,t}i(t,e);var l=t.prototype;return l.onLoad=function(){for(var e=this,t=function(t){var i=e.cells[t].getComponent(_);i&&(i.transition=_.Transition.SCALE,i.zoomScale=.92);var a=e.cells[t].getComponentInChildren(u);a&&(a.isBold=!0,a.fontSize=72,a.lineHeight=72,a.color=B.clone()),e.cells[t].on(_.EventType.CLICK,(function(){return e._onCellClicked(t)}),e)},i=0;i<this.cells.length;i++)t(i);this.node.active=!1},l.startGame=function(e){var i=this;if(void 0===e&&(e=this._vsAI),this._vsAI=e,e){var a=this._playerMark;if(this._playerMark=a===y.X?y.O:y.X,this._aiMark=a===y.X?y.X:y.O,this._matchIndex=(this._matchIndex+1)%t.DIFFICULTY_CYCLE.length,this._aiGamesPlayed>=3){var n=this._aiWins/this._aiGamesPlayed;n>.7&&Math.random()<.9?this._logic.difficulty=f.Hard:n<.3&&Math.random()<.9?this._logic.difficulty=f.Easy:this._logic.difficulty=t.DIFFICULTY_CYCLE[this._matchIndex]}else this._logic.difficulty=t.DIFFICULTY_CYCLE[this._matchIndex]}else this._playerMark=y.X,this._aiMark=y.O;this._logic.reset(),this._active=!0;for(var s=0;s<this.cells.length;s++)this._setCellVisual(s,y.Empty),this._setCellInteractable(s,!0);this.node.active=!0,e&&this._playerMark===y.O?(this._playerTurn=!1,this._updateStatus(),this.scheduleOnce((function(){return i._aiTurn()}),this.aiDelay)):(this._playerTurn=!0,this._updateStatus())},l._onCellClicked=function(e){var t=this;if(this._active&&(!this._vsAI||this._playerTurn)&&this._logic.makeMove(e)){this._setCellVisual(e,this._logic.currentPlayer),this._setCellInteractable(e,!1);var i=this._logic.checkResult();i===v.None?(this._logic.switchTurn(),this._vsAI?(this._playerTurn=!1,this._updateStatus(),this.scheduleOnce((function(){return t._aiTurn()}),this.aiDelay)):(this._playerTurn=!this._playerTurn,this._updateStatus())):this._endGame(i)}},l._aiTurn=function(){if(this._active){var e=this._logic.getAIMove();if(!(e<0)){this._logic.makeMove(e),this._setCellVisual(e,this._aiMark),this._setCellInteractable(e,!1);var t=this._logic.checkResult();t===v.None?(this._logic.switchTurn(),this._playerTurn=!0,this._updateStatus()):this._endGame(t)}}},l._endGame=function(e){var t=this;this._active=!1;for(var i=0;i<this.cells.length;i++)this._setCellInteractable(i,!1);var a,n=this._logic.getWinLine();if(n)for(var l,r=s(n);!(l=r()).done;){var o=l.value;this._setCellColor(o,z)}else for(var c=0;c<this.cells.length;c++)this._setCellColor(c,H);if(e===v.Draw)a="Draw!";else if(this._vsAI){var u=e===v.XWins&&this._playerMark===y.X||e===v.OWins&&this._playerMark===y.O;a=u?"You Win!":"You Lose!"}else a=e===v.XWins?"Player X Wins!":"Player O Wins!";(this.statusLabel.string=a,this._vsAI)&&(this._aiGamesPlayed++,(e===v.XWins&&this._playerMark===y.X||e===v.OWins&&this._playerMark===y.O)&&this._aiWins++);this.scheduleOnce((function(){return t.resultScreen.show(a)}),1)},l.backToMenu=function(){this._active=!1,this.unscheduleAllCallbacks(),this.node.active=!1,this.mainMenu.show()},l._updateStatus=function(){if(this._vsAI){var e=this._playerMark===y.X?"X":"O";this.statusLabel.string=this._playerTurn?"Your Turn ("+e+")":"AI Thinking…"}else{var t=this._logic.currentPlayer===y.X?"X":"O";this.statusLabel.string="Player "+t+"'s Turn"}},l._setCellVisual=function(e,t){var i=this.cells[e];if(i){var a=i.getComponentInChildren(u);if(a)switch(t){case y.X:a.string="X",a.color=R.clone();break;case y.O:a.string="O",a.color=R.clone();break;default:a.string="",a.color=B.clone()}var n=t===y.X?F:t===y.O?Y:E;this._setCellColor(e,n)}},l._setCellColor=function(e,t){var i,a=null==(i=this.cells[e])?void 0:i.getComponent(h);a&&(a.color=t)},l._setCellInteractable=function(e,t){var i,a=null==(i=this.cells[e])?void 0:i.getComponent(_);a&&(a.interactable=t)},t}(p)).DIFFICULTY_CYCLE=[f.Hard,f.Easy,f.Hard,f.Medium,f.Medium,f.Hard,f.Easy,f.Hard,f.Medium,f.Medium,f.Medium,f.Hard],S=t((L=D).prototype,"cells",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(L.prototype,"statusLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(L.prototype,"mainMenu",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(L.prototype,"resultScreen",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(L.prototype,"aiDelay",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),T=L))||T));l._RF.pop()}}}));

System.register("chunks:///_virtual/GameLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var r,i,e;return{setters:[function(t){r=t.createForOfIteratorHelperLoose,i=t.createClass},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"9005fP6uDdCh6gItAkA0+03","GameLogic",void 0);var n=t("CellState",function(t){return t[t.Empty=0]="Empty",t[t.X=1]="X",t[t.O=2]="O",t}({})),o=t("GameResult",function(t){return t[t.None=0]="None",t[t.XWins=1]="XWins",t[t.OWins=2]="OWins",t[t.Draw=3]="Draw",t}({})),a=t("AIDifficulty",function(t){return t[t.Easy=0]="Easy",t[t.Medium=1]="Medium",t[t.Hard=2]="Hard",t}({})),s=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];t("GameLogic",function(){function t(){this._board=[],this._currentPlayer=n.X,this._moveCount=0,this._difficulty=a.Hard,this.reset()}var e=t.prototype;return e.reset=function(){this._board=new Array(9).fill(n.Empty),this._currentPlayer=n.X,this._moveCount=0},e.makeMove=function(t){return!(t<0||t>8)&&(this._board[t]===n.Empty&&(this._board[t]=this._currentPlayer,this._moveCount++,!0))},e.switchTurn=function(){this._currentPlayer=this._currentPlayer===n.X?n.O:n.X},e.checkResult=function(){for(var t=0,r=s;t<r.length;t++){var i=r[t],e=i[0],a=i[1],u=i[2];if(this._board[e]!==n.Empty&&this._board[e]===this._board[a]&&this._board[e]===this._board[u])return this._board[e]===n.X?o.XWins:o.OWins}return this._moveCount>=9?o.Draw:o.None},e.getWinLine=function(){for(var t=0,r=s;t<r.length;t++){var i=r[t],e=i[0],o=i[1],a=i[2];if(this._board[e]!==n.Empty&&this._board[e]===this._board[o]&&this._board[e]===this._board[a])return i}return null},e.getEmptyCells=function(){for(var t=[],r=0;r<9;r++)this._board[r]===n.Empty&&t.push(r);return t},e.getAIMove=function(){var t=this.getEmptyCells();if(0===t.length)return-1;switch(this._difficulty){case a.Easy:return this._randomMove(t);case a.Medium:return Math.random()<.5?this._randomMove(t):this._bestMove(t);case a.Hard:default:return this._bestMove(t)}},e._randomMove=function(t){return t[Math.floor(Math.random()*t.length)]},e._bestMove=function(t){for(var i,e=this._currentPlayer,o=-1/0,a=t[0],s=r(t);!(i=s()).done;){var u=i.value;this._board[u]=e;var h=this._minimax(this._moveCount+1,!1,-1/0,1/0,e);this._board[u]=n.Empty,h>o&&(o=h,a=u)}return a},e._minimax=function(t,r,i,e,o){var a=o===n.X?n.O:n.X,s=this._checkWinner();if(s===o)return 10-t;if(s===a)return t-10;if(t>=9)return 0;if(r){for(var u=-1/0,h=0;h<9&&!(this._board[h]===n.Empty&&(this._board[h]=o,u=Math.max(u,this._minimax(t+1,!1,i,e,o)),this._board[h]=n.Empty,e<=(i=Math.max(i,u))));h++);return u}for(var _=1/0,c=0;c<9&&!(this._board[c]===n.Empty&&(this._board[c]=a,_=Math.min(_,this._minimax(t+1,!0,i,e,o)),this._board[c]=n.Empty,(e=Math.min(e,_))<=i));c++);return _},e._checkWinner=function(){for(var t=0,r=s;t<r.length;t++){var i=r[t],e=i[0],o=i[1],a=i[2];if(this._board[e]!==n.Empty&&this._board[e]===this._board[o]&&this._board[e]===this._board[a])return this._board[e]}return n.Empty},i(t,[{key:"board",get:function(){return this._board}},{key:"currentPlayer",get:function(){return this._currentPlayer}},{key:"moveCount",get:function(){return this._moveCount}},{key:"difficulty",get:function(){return this._difficulty},set:function(t){this._difficulty=t}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/GobbletBoard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GobbletLogic.ts","./GameLogic.ts","./GobbletPieceUI.ts","./MainMenu.ts","./ResultScreen.ts"],(function(e){var t,i,r,n,a,o,l,s,c,u,h,p,d,v,f,y,_,g,b,m,P,k,C,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,l=e._decorator,s=e.Color,c=e.Node,u=e.Label,h=e.Prefab,p=e.Sprite,d=e.Button,v=e.UITransform,f=e.Vec3,y=e.instantiate,_=e.Component},function(e){g=e.PieceSize,b=e.GobbletLogic},function(e){m=e.CellState,P=e.GameResult},function(e){k=e.GobbletPieceUI},function(e){C=e.MainMenu},function(e){S=e.ResultScreen}],execute:function(){var w,R,I,X,M,O,z,L,T,A,B,G,D,W,N,F,x,H,U,E,Y,j;o._RF.push({},"92135t8PrBLkKgrSO5FPrPm","GobbletBoard",void 0);var Z=l.ccclass,K=l.property,V=new s(90,90,90,255),q=new s(88,101,242,255),J=new s(235,87,87,255),Q=new s(72,209,140,255),$=new s(100,104,130,255),ee=new s(255,255,255,255),te=((w={})[g.Small]=25,w[g.Medium]=60,w[g.Big]=100,w);e("GobbletBoard",(R=Z("GobbletBoard"),I=K({type:[c],tooltip:"9 cell Nodes in row-major order"}),X=K({type:u,tooltip:"Shows current turn / result"}),M=K({type:c,tooltip:"Container for Player X inventory (top rack)"}),O=K({type:c,tooltip:"Container for Player O inventory (bottom rack)"}),z=K({type:h,tooltip:"Piece prefab: UITransform + Sprite + child Label"}),L=K({type:c,tooltip:"Top-level empty node for drag z-ordering"}),T=K({type:C,tooltip:"MainMenu component on MainMenuPanel"}),A=K({type:S,tooltip:"ResultScreen component on ResultPanel"}),B=K({tooltip:"Seconds AI waits before playing"}),R((W=t((D=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,r(t,"cells",W,n(t)),r(t,"statusLabel",N,n(t)),r(t,"playerXRack",F,n(t)),r(t,"playerORack",x,n(t)),r(t,"piecePrefab",H,n(t)),r(t,"dragLayer",U,n(t)),r(t,"mainMenu",E,n(t)),r(t,"resultScreen",Y,n(t)),r(t,"aiDelay",j,n(t)),t._logic=new b,t._active=!1,t._vsAI=!1,t._playerTurn=!0,t._playerMark=m.X,t._aiMark=m.O,t._rackSlots=new Map,t}i(t,e);var o=t.prototype;return o.onLoad=function(){for(var e,t=a(this.cells);!(e=t()).done;){var i=e.value,r=i.getComponent(p);r&&(r.color=V.clone());var n=i.getComponent(d);n&&(n.transition=d.Transition.NONE)}this.node.active=!1},o.startGame=function(e){var t=this;void 0===e&&(e=this._vsAI),this._vsAI=e;var i=this._playerMark;this._playerMark=i===m.X?m.O:m.X,this._aiMark=i===m.X?m.X:m.O,this._logic.reset(),this._active=!0;for(var r,n=a(this.cells);!(r=n()).done;){var o=r.value,l=o.getComponent(p);l&&(l.color=V.clone());for(var s=o.children.length-1;s>=0;s--){var c=o.children[s];"PlacedPiece"===c.name&&(c.removeFromParent(),c.destroy())}}this.playerXRack.active=!0,this.playerORack.active=!0,this._spawnRackSlots(),this.node.active=!0,e&&this._playerMark===m.O?(this._playerTurn=!1,this._updateStatus(),this._updateRackInteractivity(),this.scheduleOnce((function(){return t._aiTurn()}),this.aiDelay)):(this._playerTurn=!0,this._updateStatus(),this._updateRackInteractivity())},o.canInteract=function(e){return!!this._active&&(e.owner===this._logic.currentPlayer&&(!(this._vsAI&&!this._playerTurn)&&!(e.count<=0)))},o.getCellAtWorldPos=function(e){for(var t=0;t<this.cells.length;t++){var i=this.cells[t].getComponent(v);if(i&&i.getBoundingBoxToWorld().contains(e))return t}return-1},o.tryPlacePiece=function(e,t,i){var r=this;if(!this._logic.canPlace(e,t.pieceSize))return!1;this._logic.makeMove(e,t.pieceSize),t.decrement(),i.removeFromParent(),this.cells[e].addChild(i),i.setPosition(f.ZERO),i.name="PlacedPiece",this._setCellColor(e,t.owner===m.X?q:J);var n=this._logic.checkResult();return n!==P.None?(this._endGame(n),!0):(this._logic.switchTurn(),this._vsAI?(this._playerTurn=!1,this._updateStatus(),this._updateRackInteractivity(),this.scheduleOnce((function(){return r._aiTurn()}),this.aiDelay)):(this._playerTurn=!this._playerTurn,this._updateStatus(),this._updateRackInteractivity()),!0)},o.createPieceNode=function(e,t){var i=y(this.piecePrefab);i.name="PlacedPiece";var r=e===m.X?q:J,n=i.getComponent(p);n&&(n.color=r.clone());var a=i.getComponentInChildren(u);return a&&(a.string=e===m.X?"X":"O",a.color=ee.clone(),a.isBold=!0,a.fontSize=te[t],a.lineHeight=a.fontSize),i},o.backToMenu=function(){this._active=!1,this.unscheduleAllCallbacks(),this._clearAll(),this.node.active=!1,this.mainMenu.show()},o._aiTurn=function(){if(this._active){var e=this._logic.getAIMove();if(e){var t=this._logic.currentPlayer,i=this._rackSlots.get(t);if(i){var r=i.find((function(t){return t.pieceSize===e.size&&t.count>0}));if(!r)return;this._logic.makeMove(e.cellIndex,e.size),r.decrement()}var n=this.createPieceNode(t,e.size);this.cells[e.cellIndex].addChild(n),n.setPosition(f.ZERO),this._setCellColor(e.cellIndex,t===m.X?q:J);var a=this._logic.checkResult();a===P.None?(this._logic.switchTurn(),this._playerTurn=!0,this._updateStatus(),this._updateRackInteractivity()):this._endGame(a)}}},o._endGame=function(e){var t=this;this._active=!1,this.playerXRack.active=!1,this.playerORack.active=!1;var i,r=this._logic.getWinLine();if(r)for(var n,o=a(r);!(n=o()).done;){var l=n.value;this._setCellColor(l,Q)}else for(var s=0;s<this.cells.length;s++)this._setCellColor(s,$);if(e===P.Draw)i="Draw!";else if(this._vsAI){var c=e===P.XWins&&this._playerMark===m.X||e===P.OWins&&this._playerMark===m.O;i=c?"You Win!":"You Lose!"}else i=e===P.XWins?"Player X Wins!":"Player O Wins!";this.statusLabel.string=i,this.scheduleOnce((function(){return t.resultScreen.show(i,"gobblet")}),1)},o._spawnRackSlots=function(){this._clearAll(),this._rackSlots.clear(),this._spawnPlayerSlots(m.X,this.playerXRack,q),this._spawnPlayerSlots(m.O,this.playerORack,J)},o._spawnPlayerSlots=function(e,t,i){for(var r=[],n=0,a=[g.Big,g.Medium,g.Small];n<a.length;n++){var o=a[n],l=y(this.piecePrefab);t.addChild(l);var s=l.getComponent(p);s&&(s.color=i.clone());var h=l.getComponentInChildren(u);h&&(h.string=e===m.X?"X":"O",h.color=ee.clone(),h.isBold=!0,h.fontSize=te[o],h.lineHeight=h.fontSize);var d=new c("CountLabel");l.addChild(d),d.addComponent(v).setContentSize(100,40);var f=d.addComponent(u);f.string="(3)",f.fontSize=20,f.lineHeight=20,f.color=ee.clone(),f.isBold=!0,d.setPosition(0,-50,0);var _=l.getComponent(k);_||(_=l.addComponent(k)),_.init(this,e,o,this.dragLayer,i),_.setCountLabel(f),r.push(_)}this._rackSlots.set(e,r)},o._clearAll=function(){for(var e=this.playerXRack.children.length-1;e>=0;e--)this.playerXRack.children[e].destroy();for(var t=this.playerORack.children.length-1;t>=0;t--)this.playerORack.children[t].destroy();for(var i,r=a(this.cells);!(i=r()).done;)for(var n=i.value,o=n.children.length-1;o>=0;o--)"PlacedPiece"===n.children[o].name&&n.children[o].destroy();for(var l=this.dragLayer.children.length-1;l>=0;l--)this.dragLayer.children[l].destroy()},o._updateStatus=function(){if(this._vsAI){var e=this._playerMark===m.X?"X":"O";this.statusLabel.string=this._playerTurn?"Your Turn ("+e+")":"AI Thinking…"}else{var t=this._logic.currentPlayer===m.X?"X":"O";this.statusLabel.string="Player "+t+"'s Turn"}},o._setCellColor=function(e,t){var i=this.cells[e];if(i){for(var r=i.children.length-1;r>=0;r--){var n=i.children[r];if("PlacedPiece"===n.name){var a=n.getComponent(p);return void(a&&(a.color=t))}}var o=i.getComponent(p);o&&(o.color=t)}},o._updateRackInteractivity=function(){for(var e,t=this._logic.currentPlayer,i=a(this._rackSlots);!(e=i()).done;)for(var r,n=e.value,o=n[0],l=n[1],s=o===t&&this._active,c=a(l);!(r=c()).done;){var u=r.value;u.setInteractable(s);var h=u.node.getComponent(p);if(h){var d=h.color.clone();d.a=s?255:100,h.color=d}}},t}(_)).prototype,"cells",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=t(D.prototype,"statusLabel",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(D.prototype,"playerXRack",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(D.prototype,"playerORack",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(D.prototype,"piecePrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(D.prototype,"dragLayer",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(D.prototype,"mainMenu",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(D.prototype,"resultScreen",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(D.prototype,"aiDelay",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),G=D))||G));o._RF.pop()}}}));

System.register("chunks:///_virtual/GobbletLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameLogic.ts"],(function(e){var n,r,t,i,o;return{setters:[function(e){n=e.createForOfIteratorHelperLoose,r=e.createClass},function(e){t=e.cclegacy},function(e){i=e.CellState,o=e.GameResult}],execute:function(){t._RF.push({},"80d050IB2hL2aeIjoH5AoK0","GobbletLogic",void 0);var l=e("PieceSize",function(e){return e[e.Small=1]="Small",e[e.Medium=2]="Medium",e[e.Big=3]="Big",e}({})),u=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];e("GobbletLogic",function(){function e(){var e,n;this._board=[],this._inventory=[(e={},e[l.Small]=3,e[l.Medium]=3,e[l.Big]=3,e),(n={},n[l.Small]=3,n[l.Medium]=3,n[l.Big]=3,n)],this._currentPlayer=i.X,this._moveCount=0,this.reset()}var t=e.prototype;return t.getInventory=function(e){return this._inventory[e===i.X?0:1]},t.getTopPiece=function(e){var n=this._board[e];return n.length>0?n[n.length-1]:null},t.reset=function(){var e,n;this._board=[];for(var r=0;r<9;r++)this._board.push([]);this._inventory=[(e={},e[l.Small]=3,e[l.Medium]=3,e[l.Big]=3,e),(n={},n[l.Small]=3,n[l.Medium]=3,n[l.Big]=3,n)],this._currentPlayer=i.X,this._moveCount=0},t.canPlace=function(e,n){if(e<0||e>8)return!1;if(this._inventory[this._currentPlayer===i.X?0:1][n]<=0)return!1;var r=this.getTopPiece(e);return!(null!==r&&r.size>=n)},t.makeMove=function(e,n){if(!this.canPlace(e,n))return!1;var r=this._currentPlayer===i.X?0:1;return this._inventory[r][n]--,this._board[e].push({owner:this._currentPlayer,size:n}),this._moveCount++,!0},t.switchTurn=function(){this._currentPlayer=this._currentPlayer===i.X?i.O:i.X},t.checkResult=function(){for(var e=0,n=u;e<n.length;e++){var r=n[e],t=r[0],l=r[1],c=r[2],s=this.getTopPiece(t),a=this.getTopPiece(l),h=this.getTopPiece(c);if(null!==s&&null!==a&&null!==h&&s.owner===a.owner&&s.owner===h.owner)return s.owner===i.X?o.XWins:o.OWins}return 0===this.getLegalMoves().length?o.Draw:o.None},t.getWinLine=function(){for(var e=0,n=u;e<n.length;e++){var r=n[e],t=r[0],i=r[1],o=r[2],l=this.getTopPiece(t),c=this.getTopPiece(i),s=this.getTopPiece(o);if(null!==l&&null!==c&&null!==s&&l.owner===c.owner&&l.owner===s.owner)return r}return null},t.getLegalMoves=function(){for(var e=[],n=this._inventory[this._currentPlayer===i.X?0:1],r=0,t=[l.Big,l.Medium,l.Small];r<t.length;r++){var o=t[r];if(!(n[o]<=0))for(var u=0;u<9;u++){var c=this.getTopPiece(u);(null===c||c.size<o)&&e.push({cellIndex:u,size:o})}}return e},t.getAIMove=function(){var e=this,r=this.getLegalMoves();if(0===r.length)return null;for(var t,o=this._currentPlayer===i.X?i.O:i.X,u=n(r);!(t=u()).done;){var c=t.value;if(this._simulateWins(c,this._currentPlayer))return c}for(var s,a=n(r);!(s=a()).done;){var h=s.value;if(this._blocksOpponentWin(h,o))return h}for(var f,v=r.filter((function(n){var r=e.getTopPiece(n.cellIndex);return null===r||r.owner!==e._currentPlayer})),g=v.length>0?v:r,_=function(){for(var e,n=p[d],r=function(){var e=i[t],r=g.find((function(r){return r.cellIndex===n&&r.size===e}));if(r)return{v:{v:r}}},t=0,i=[l.Small,l.Medium,l.Big];t<i.length;t++)if(e=r())return e.v},d=0,p=[4,0,2,6,8,1,3,5,7];d<p.length;d++)if(f=_())return f.v;return g[Math.floor(Math.random()*g.length)]},t._simulateWins=function(e,n){this._board[e.cellIndex].push({owner:n,size:e.size});var r=this._checkWinnerIs(n);return this._board[e.cellIndex].pop(),r},t._blocksOpponentWin=function(e,n){for(var r=0,t=u;r<t.length;r++){var i=t[r],o=i[0],l=i[1],c=i[2];if(e.cellIndex===o||e.cellIndex===l||e.cellIndex===c){for(var s=0,a=-1,h=0,f=[o,l,c];h<f.length;h++){var v=f[h],g=this.getTopPiece(v);null!==g&&g.owner===n?s++:v===e.cellIndex&&(a=v)}if(2===s&&a===e.cellIndex)return!0}}return!1},t._checkWinnerIs=function(e){for(var n=0,r=u;n<r.length;n++){var t=r[n],i=t[0],o=t[1],l=t[2],c=this.getTopPiece(i),s=this.getTopPiece(o),a=this.getTopPiece(l);if(null!==c&&null!==s&&null!==a&&c.owner===e&&s.owner===e&&a.owner===e)return!0}return!1},r(e,[{key:"currentPlayer",get:function(){return this._currentPlayer}},{key:"moveCount",get:function(){return this._moveCount}}]),e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/GobbletPieceUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GobbletLogic.ts","./GameLogic.ts"],(function(t){var o,e,n,i,r,s,h,a,c,_,d,u;return{setters:[function(t){o=t.inheritsLoose,e=t.createClass},function(t){n=t.cclegacy,i=t._decorator,r=t.Color,s=t.Node,h=t.UITransform,a=t.Vec3,c=t.Sprite,_=t.Component},function(t){d=t.PieceSize},function(t){u=t.CellState}],execute:function(){var l;n._RF.push({},"1e400Uw0H1C05um7Th+i/dq","GobbletPieceUI",void 0);var g=i.ccclass,y=new r(60,60,60,180);t("GobbletPieceUI",g("GobbletPieceUI")(l=function(t){function n(){for(var o,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(o=t.call.apply(t,[this].concat(n))||this).pieceSize=d.Small,o.owner=u.X,o._board=null,o._dragLayer=null,o._count=3,o._countLabel=null,o._ownerColor=new r(255,255,255,255),o._dragging=!1,o._dragProxy=null,o}o(n,t);var i=n.prototype;return i.init=function(t,o,e,n,i){this._board=t,this.owner=o,this.pieceSize=e,this._dragLayer=n,this._ownerColor=i.clone(),this._count=3},i.setCountLabel=function(t){this._countLabel=t,this._refreshCount()},i.decrement=function(){this._count=Math.max(0,this._count-1),this._refreshCount()},i.onLoad=function(){this.node.on(s.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(s.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(s.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(s.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},i.setInteractable=function(t){t&&this._count>0?this.node.on(s.EventType.TOUCH_START,this._onTouchStart,this):this.node.off(s.EventType.TOUCH_START,this._onTouchStart,this)},i._onTouchStart=function(t){if(this._board&&this._board.canInteract(this)&&!(this._count<=0)){if(this._dragging=!0,this._dragProxy=this._board.createPieceNode(this.owner,this.pieceSize),this._dragLayer&&this._dragProxy){this._dragLayer.addChild(this._dragProxy);var o=this.node.getComponent(h).convertToWorldSpaceAR(a.ZERO),e=this._dragLayer.getComponent(h).convertToNodeSpaceAR(o);this._dragProxy.setPosition(e)}t.propagationStopped=!0}},i._onTouchMove=function(t){if(this._dragging&&this._dragProxy){var o=t.getUIDelta(),e=this._dragProxy.position;this._dragProxy.setPosition(e.x+o.x,e.y+o.y,e.z)}},i._onTouchEnd=function(t){if(this._dragging&&this._dragProxy)if(this._dragging=!1,this._board){var o=t.getUILocation(),e=new a(o.x,o.y,0),n=this._board.getCellAtWorldPos(e);n>=0&&this._board.tryPlacePiece(n,this,this._dragProxy)?this._dragProxy=null:this._destroyProxy()}else this._destroyProxy()},i._destroyProxy=function(){this._dragProxy&&(this._dragProxy.removeFromParent(),this._dragProxy.destroy(),this._dragProxy=null)},i._refreshCount=function(){this._countLabel&&(this._countLabel.string="("+this._count+")");var t=this.node.getComponent(c);t&&(t.color=this._count>0?this._ownerColor.clone():y.clone())},e(n,[{key:"count",get:function(){return this._count}}]),n}(_))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./GameBoard.ts","./GameLogic.ts","./GobbletBoard.ts","./GobbletLogic.ts","./GobbletPieceUI.ts","./MainMenu.ts","./ResultScreen.ts"],(function(){return{setters:[null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,a,i,l,r,b,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,l=t._decorator,r=t.Button,b=t.Node,p=t.Component}],execute:function(){var d,u,s,c,h,y,g,B,m,f,G,_,v,L,P;i._RF.push({},"cfc36HIc5dHvoveCfdLVZ+j","MainMenu",void 0);var C=l.ccclass,M=l.property;t("MainMenu",(d=C("MainMenu"),u=M({type:r,tooltip:"Start a game against the AI"}),s=M({type:r,tooltip:"Start a local 2-player game"}),c=M({type:r,tooltip:"Start a Gobblet game (ai)"}),h=M({type:r,tooltip:"Start a Gobblet game (local 2P)"}),y=M({type:b,tooltip:"Drag the GamePanel node here"}),g=M({type:b,tooltip:"Drag the GobbletPanel node here"}),d((f=e((m=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i))||this,n(e,"playRandomBtn",f,a(e)),n(e,"playFriendBtn",G,a(e)),n(e,"playGobbletBtn",_,a(e)),n(e,"playGobbletLocalBtn",v,a(e)),n(e,"gameBoardNode",L,a(e)),n(e,"gobbletBoardNode",P,a(e)),e._gameBoard=void 0,e._gobbletBoard=null,e}o(e,t);var i=e.prototype;return i.onLoad=function(){this._gameBoard=this.gameBoardNode.getComponent("GameBoard"),this.playRandomBtn.node.on(r.EventType.CLICK,this._onPlayRandom,this),this.playFriendBtn.node.on(r.EventType.CLICK,this._onPlayFriend,this),this.gobbletBoardNode&&(this._gobbletBoard=this.gobbletBoardNode.getComponent("GobbletBoard")),this.playGobbletBtn&&this.playGobbletBtn.node.on(r.EventType.CLICK,this._onPlayGobblet,this),this.playGobbletLocalBtn&&this.playGobbletLocalBtn.node.on(r.EventType.CLICK,this._onPlayGobbletLocal,this)},i.show=function(){this.node.active=!0},i.hide=function(){this.node.active=!1},i._onPlayRandom=function(){this._gameBoard.startGame(!0),this.hide()},i._onPlayFriend=function(){this._gameBoard.startGame(!1),this.hide()},i._onPlayGobblet=function(){this._gobbletBoard&&(this._gobbletBoard.startGame(!0),this.hide())},i._onPlayGobbletLocal=function(){this._gobbletBoard&&(this._gobbletBoard.startGame(!1),this.hide())},e}(p)).prototype,"playRandomBtn",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(m.prototype,"playFriendBtn",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(m.prototype,"playGobbletBtn",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(m.prototype,"playGobbletLocalBtn",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(m.prototype,"gameBoardNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(m.prototype,"gobbletBoardNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=m))||B));i._RF.pop()}}}));

System.register("chunks:///_virtual/ResultScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,i,a,r,l,s,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Label,s=e.Button,u=e.Node,c=e.Component}],execute:function(){var b,d,h,p,g,m,B,f,y,_,v,L,M;a._RF.push({},"2d1bfC3sFhNmKZemlE3+jyg","ResultScreen",void 0);var N=r.ccclass,k=r.property;e("ResultScreen",(b=N("ResultScreen"),d=k({type:l,tooltip:"Label that displays the result message"}),h=k({type:s,tooltip:"Button to start a new game immediately"}),p=k({type:s,tooltip:"Button to return to the main menu"}),g=k({type:u,tooltip:"Drag the GamePanel node here"}),m=k({type:u,tooltip:"Drag the GobbletPanel node here"}),b((y=t((f=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"resultLabel",y,i(t)),n(t,"rematchBtn",_,i(t)),n(t,"backToMenuBtn",v,i(t)),n(t,"gameBoardNode",L,i(t)),n(t,"gobbletBoardNode",M,i(t)),t._gameBoard=void 0,t._gobbletBoard=null,t._activeMode="classic",t}o(t,e);var a=t.prototype;return a.onLoad=function(){this._gameBoard=this.gameBoardNode.getComponent("GameBoard"),this.gobbletBoardNode&&(this._gobbletBoard=this.gobbletBoardNode.getComponent("GobbletBoard")),this.rematchBtn.node.on(s.EventType.CLICK,this._onRematch,this),this.backToMenuBtn.node.on(s.EventType.CLICK,this._onBack,this)},a.show=function(e,t){void 0===t&&(t="classic"),this._activeMode=t,this.resultLabel.string=e,this.node.active=!0},a.hide=function(){this.node.active=!1},a._onRematch=function(){this.hide(),"gobblet"===this._activeMode&&this._gobbletBoard?this._gobbletBoard.startGame():this._gameBoard.startGame()},a._onBack=function(){this.hide(),"gobblet"===this._activeMode&&this._gobbletBoard?this._gobbletBoard.backToMenu():this._gameBoard.backToMenu()},t}(c)).prototype,"resultLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(f.prototype,"rematchBtn",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(f.prototype,"backToMenuBtn",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(f.prototype,"gameBoardNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(f.prototype,"gobbletBoardNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=f))||B));a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});